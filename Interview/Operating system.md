[TOC]

# 操作系统的功能

* 进程管理：主要是实现进程线程之间的调度，处理进程之间的同步和互斥问题，以及可能产生的死锁等问题。
* 内存管理：内存空间的分配和回收。（虚拟内存，内存空间扩充，地址转换等）
* 文件管理：对文件目录的管理，文件共享，文件保护，对非空闲磁盘块的管理，以及对空闲磁盘块的管理，磁盘调度，磁盘管理。
* 设备管理：中断处理（程序直接控制，中断驱动方式，DMA方式，通道控制）

# 进程与线程的区别

* 进程是对运行时程序的封装，线程是进程的子任务。
* 线程是CPU调度的基本单位，进程是资源分配的基本单位（没有线程的时候，进程是CPU调度的基本单位）
* 进程拥有独立的内存空间，进程的各个线程共享这块空间，但是线程几乎不拥有资源
* 进程和线程的通信方式不同
* 创建或撤销进程开销大（系统需要分配或回收资源），创建或撤销线程开销小
* 进程间不会影响，然而同一进程的一个线程挂掉，会导致整个进程挂掉

# 进程间通信

* 管道：半双工，速度慢，容量有限，只有父子之间的进程能通信
* 消息队列：容量受到系统限制
* 共享内存：速度快，但要保持同步
* 套接字：可用于不同主机之间的进程通信

# 线程间通信

* 临界区：通过多线程的串行化来访问公共资源或一段代码，速度快，适合控制数据访问
* 互斥量 Synchronized：多个线程通过synchronized关键字实现线程间通信
* 信号量 Semphare：允许多个线程在同一时刻访问同一资源，但需要设置最大线程数目
* Wait/Notify：通过通知操作的方式来保持多线程同步，且可实现多线程优先级的比较

# 进程调度算法

* 先来先服务
* 短作业优先
* 优先级调度
* 时间片轮转
* 多级反馈队列

# 进程互斥需要遵循的四原则

* 空闲让进：当临界资源处于空闲状态时，允许一个请求进入临界区
* 忙则等待：已有进程进入临界区时，其他准备进入临界区的进程需要等待
* 有限等待：保证进程能在有效的时间进入临界区，防止死等状态
* 让权等待：自己进不了临界区的进程，应当立即释放处理机，防止进程忙等待

# 死锁的必要条件

死锁：各进程互相等待对方手里的资源，导致所有进程阻塞，无法向前推进

四个必要条件：

* 互斥：进程对所分配到的资源不允许其他进程访问
* 不可剥夺：被分配的资源，只能进程主动释放
* 循环等待：多个进程互相等待对方拥有的资源
* 请求保持：保持一些资源的同时，请求别的资源

# 死锁的解决

破坏上述四个条件之一即可。主要方法如下：

* 资源一次性分配，剥夺请求和保持条件。
* 可剥夺资源：当进程新的资源未得到满足时，释放已占有的资源
* 资源有序分配：系统给每类资源赋予一个序号，每个进程按编号递增的请求资源，释放则相反。破坏循环等待。

